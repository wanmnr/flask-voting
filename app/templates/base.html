<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %} - My Flask App</title>
    {% assets "css_all" %}
    <link rel="stylesheet" href="{{ ASSET_URL }}">
    {% endassets %}
</head>

<body>
    <nav>
        <div class="nav-links">
            <a href="{{ url_for('main.home') }}">Home</a>
            <a href="{{ url_for('main.about') }}">About</a>
        </div>
        <div class="search-container">
            <form class="search-box" action="{{ url_for('main.home') }}" method="GET">
                <input type="text" name="q" placeholder="Search..." aria-label="Search">
                <button type="submit" aria-label="Submit search">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        viewBox="0 0 16 16">
                        <path
                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                    </svg>
                </button>
            </form>
        </div>
        <div class="auth-buttons">
            {% if current_user.is_authenticated %}
                <div class="user-menu">
                    <span class="username">{{ current_user.username }}</span>
                    <a href="{{ url_for('main.profile') }}" class="btn">Profile</a>
                    <a href="{{ url_for('auth.logout') }}" class="btn btn-logout">Logout</a>
                </div>
            {% else %}
                <a href="{{ url_for('auth.login') }}" class="btn btn-login">Login</a>
                <a href="{{ url_for('auth.register') }}" class="btn btn-signup">Sign Up</a>
            {% endif %}
        </div>
    </nav>

    <div class="page-wrapper">
        <aside class="sidebar">
            {% include 'components/sidebar.html' %}

            {# Optional: Allow pages to add additional sidebar content if needed #}
            {% block extra_sidebar %}
            <!-- Additional sidebar content can be added in child templates -->
            {% endblock %}
        </aside>

        <main class="main-content">
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            {% block content %}
            {% endblock %}
        </main>
    </div>
</body>

</html>